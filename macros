{%@@ macro swayidle(lock='180', display=False, suspend=False) @@%}
# This file is automatically generated by dotdrop based on a template.
# Please do not modify this file by hand.
# Instead, edit ~/.dotfiles/templates, and run `dotdrop install swayidle`

{%@@ if lock @@%}
# Make it visually obvious we are locking, and give a few extra seconds to
# prevent a lock once the lock animation ends.
timeout {{@@ lock @@}} 'swaylock --fade-in=3 --grace=5'

{%@@ endif @@%}
{%@@ if display @@%}
# Turn off the display to save power
timeout {{@@ display @@}} 'swaymsg "output * power off"' resume 'swaymsg "output * power on"'

{%@@ endif @@%}
{%@@ if suspend @@%}
# Suspend to save even more power.
timeout {{@@ suspend @@}} 'systemctl suspend-then-hibernate'

{%@@ endif @@%}
# Ensure we lock when the session gets locked (e.g. when the lid is closed)
before-sleep 'swaylock'
lock 'swaylock'
{%@@ endmacro @@%}

{%@@ macro execIfExists(name) @@%}
{%@@ if name @@%}; exec "{{@@ name @@}}"{%@@ endif @@%}
{%@@ endmacro @@%}
